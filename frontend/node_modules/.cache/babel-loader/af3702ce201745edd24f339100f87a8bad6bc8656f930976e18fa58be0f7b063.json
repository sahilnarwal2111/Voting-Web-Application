{"ast":null,"code":"import axios from 'axios';\n\n// Create axios instance with base URL\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// âœ… Add this function to set/remove token dynamically\nexport const setAuthToken = token => {\n  if (token) {\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    localStorage.setItem('token', token);\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n    localStorage.removeItem('token');\n  }\n};\n\n// ðŸ” Token might already be in localStorage on load\nconst token = localStorage.getItem('token');\nif (token) {\n  setAuthToken(token);\n}\n\n// Add token to headers if it exists in localStorage\nif (localStorage.token) {\n  api.defaults.headers.common['Authorization'] = `Bearer ${localStorage.token}`;\n}\n\n// Response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  const {\n    response\n  } = error;\n\n  // Handle specific error cases\n  if (response && response.status === 401) {\n    // Unauthorized - clear token\n    localStorage.removeItem('token');\n    delete api.defaults.headers.common['Authorization'];\n  }\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","headers","setAuthToken","token","defaults","common","localStorage","setItem","removeItem","getItem","interceptors","response","use","error","status","Promise","reject"],"sources":["/Users/sahilnarwal/Documents/Sem-8/Major Project/Pro/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Create axios instance with base URL\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8080',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// âœ… Add this function to set/remove token dynamically\nexport const setAuthToken = (token) => {\n  if (token) {\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    localStorage.setItem('token', token);\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n    localStorage.removeItem('token');\n  }\n};\n\n// ðŸ” Token might already be in localStorage on load\nconst token = localStorage.getItem('token');\nif (token) {\n  setAuthToken(token);\n}\n\n\n// Add token to headers if it exists in localStorage\nif (localStorage.token) {\n  api.defaults.headers.common['Authorization'] = `Bearer ${localStorage.token}`;\n}\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  response => response,\n  error => {\n    const { response } = error;\n\n    // Handle specific error cases\n    if (response && response.status === 401) {\n      // Unauthorized - clear token\n      localStorage.removeItem('token');\n      delete api.defaults.headers.common['Authorization'];\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;EACjEC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMC,YAAY,GAAIC,KAAK,IAAK;EACrC,IAAIA,KAAK,EAAE;IACTR,GAAG,CAACS,QAAQ,CAACH,OAAO,CAACI,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUF,KAAK,EAAE;IAChEG,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;EACtC,CAAC,MAAM;IACL,OAAOR,GAAG,CAACS,QAAQ,CAACH,OAAO,CAACI,MAAM,CAAC,eAAe,CAAC;IACnDC,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;EAClC;AACF,CAAC;;AAED;AACA,MAAML,KAAK,GAAGG,YAAY,CAACG,OAAO,CAAC,OAAO,CAAC;AAC3C,IAAIN,KAAK,EAAE;EACTD,YAAY,CAACC,KAAK,CAAC;AACrB;;AAGA;AACA,IAAIG,YAAY,CAACH,KAAK,EAAE;EACtBR,GAAG,CAACS,QAAQ,CAACH,OAAO,CAACI,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUC,YAAY,CAACH,KAAK,EAAE;AAC/E;;AAEA;AACAR,GAAG,CAACe,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC3BD,QAAQ,IAAIA,QAAQ,EACpBE,KAAK,IAAI;EACP,MAAM;IAAEF;EAAS,CAAC,GAAGE,KAAK;;EAE1B;EACA,IAAIF,QAAQ,IAAIA,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACvC;IACAR,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;IAChC,OAAOb,GAAG,CAACS,QAAQ,CAACH,OAAO,CAACI,MAAM,CAAC,eAAe,CAAC;EACrD;EAEA,OAAOU,OAAO,CAACC,MAAM,CAACH,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAelB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}